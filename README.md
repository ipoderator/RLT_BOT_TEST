# Telegram-–±–æ—Ç –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ –≤–∏–¥–µ–æ

–ë–æ—Ç –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤–∏–¥–µ–æ-–∫—Ä–µ–∞—Ç–æ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[ARCHITECTURE.md](ARCHITECTURE.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã
- **[COMPONENTS.md](COMPONENTS.md)** - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **[QUICK_START.md](QUICK_START.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–≥–æ

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤–∏–¥–µ–æ (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –ª–∞–π–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Ä–µ–ø–æ—Å—Ç—ã, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)
- üîç –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- üìà –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –¥–∏–Ω–∞–º–∏–∫–∏ (–ø–æ—á–∞—Å–æ–≤—ã–µ —Å–Ω–∞–ø—à–æ—Ç—ã)
- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é LLM

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd rlt
```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ):
```bash
python3 -m venv env
source env/bin/activate  # –¥–ª—è macOS/Linux
# –∏–ª–∏
env\Scripts\activate  # –¥–ª—è Windows
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

   **–í–∞—Ä–∏–∞–Ω—Ç 1 (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π):**
   ```bash
   python scripts/setup_env.py
   ```
   –°–∫—Ä–∏–ø—Ç –ø–æ–º–æ–∂–µ—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

   **–í–∞—Ä–∏–∞–Ω—Ç 2 (–≤—Ä—É—á–Ω—É—é):**
   ```bash
   cp .env.example .env
   ```
   –ó–∞—Ç–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:
   ```env
   TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
   GIGACHAT_CREDENTIALS=your_gigachat_credentials_here
   GIGACHAT_SCOPE=GIGACHAT_API_PERS
   DATABASE_URL=postgresql://user:password@localhost:5432/video_analytics
   ```

   –ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:
   - **TELEGRAM_BOT_TOKEN**: –ü–æ–ª—É—á–∏—Ç–µ —É [@BotFather](https://t.me/BotFather) –≤ Telegram
   - **GIGACHAT_CREDENTIALS**: –ü–æ–ª—É—á–∏—Ç–µ –Ω–∞ [–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –°–±–µ—Ä–∞](https://developers.sber.ru/gigachat) - —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∏—Ç–µ Authorization Key
   - **GIGACHAT_SCOPE**: –û–±–ª–∞—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è API (GIGACHAT_API_PERS –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, GIGACHAT_API_B2B –∏–ª–∏ GIGACHAT_API_CORP –¥–ª—è –±–∏–∑–Ω–µ—Å–∞)
   - **DATABASE_URL**: URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL –≤ —Ñ–æ—Ä–º–∞—Ç–µ `postgresql://user:password@host:port/dbname`

   –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–º. –≤ —Ñ–∞–π–ª–µ `.env.example`.

6. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
```sql
CREATE DATABASE video_analytics;
```

## –ó–∞–ø—É—Å–∫ —Å Docker

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –∏–∑–æ–ª–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [Docker](https://www.docker.com/get-started) (–≤–µ—Ä—Å–∏—è 20.10+)
- [Docker Compose](https://docs.docker.com/compose/install/) (–≤–µ—Ä—Å–∏—è 2.0+)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd rlt
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:
```bash
cp .env.example .env
```

3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```env
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
GIGACHAT_CREDENTIALS=your_gigachat_credentials_here
GIGACHAT_SCOPE=GIGACHAT_API_PERS
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=video_analytics
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
docker-compose up -d
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
- PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–æ—Ä—Ç—É 5432
- Telegram –±–æ—Ç–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö `src/` –∏ `scripts/`. –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö `.py` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö `src/` –∏ `scripts/` –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ –±–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –õ–æ–≥–∏ –∏ –∫—ç—à —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

**–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):**

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:
```env
AUTO_RELOAD=false
```

–ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
```bash
AUTO_RELOAD=false docker-compose up -d
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π:**
```bash
docker-compose logs -f bot
```

5. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```bash
docker-compose exec bot python -c "from src.database import init_db; import os; from dotenv import load_dotenv; load_dotenv(); init_db(os.getenv('DATABASE_URL'))"
```

6. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑—É:
```bash
docker-compose exec bot python scripts/load_data.py <–ø—É—Ç—å_–∫_json_—Ñ–∞–π–ª—É>
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤: `docker-compose logs -f bot`
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞: `docker-compose down`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫: `docker-compose restart bot`
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö: `docker-compose down -v`

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL –º–∏–≥—Ä–∞—Ü–∏–π –≤ Docker

–ú–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ SQLAlchemy (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ) –∏–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
# –ß–µ—Ä–µ–∑ psql
docker-compose exec postgres psql -U postgres -d video_analytics -f /path/to/migrations/001_initial_schema.sql

# –ò–ª–∏ —á–µ—Ä–µ–∑ Python (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
docker-compose exec bot python -c "from database import init_db; import os; from dotenv import load_dotenv; load_dotenv(); init_db(os.getenv('DATABASE_URL'))"
```

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

1. –°–∫–∞—á–∞–π—Ç–µ JSON —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ (—Å—Å—ã–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ)

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑—É:
```bash
python scripts/load_data.py <–ø—É—Ç—å_–∫_json_—Ñ–∞–π–ª—É>
```

–ù–∞–ø—Ä–∏–º–µ—Ä:
```bash
python scripts/load_data.py data.json
```

## –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot.py
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram (–ø–æ –∏–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —É–∫–∞–∑–∞–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É @BotFather)

2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start` –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã

3. –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   - "–°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –≤–∏–¥–µ–æ –µ—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ?"
   - "–°–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ —É –∫—Ä–µ–∞—Ç–æ—Ä–∞ —Å id creator123 –≤—ã—à–ª–æ —Å 1 –Ω–æ—è–±—Ä—è 2025 –ø–æ 5 –Ω–æ—è–±—Ä—è 2025 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ?"
   - "–°–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ –Ω–∞–±—Ä–∞–ª–æ –±–æ–ª—å—à–µ 100 000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è?" (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ø—Ä–æ–±–µ–ª—ã –≤ —á–∏—Å–ª–∞—Ö)
   - "–ù–∞ —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –≤ —Å—É–º–º–µ –≤—ã—Ä–æ—Å–ª–∏ –≤—Å–µ –≤–∏–¥–µ–æ 28 –Ω–æ—è–±—Ä—è 2025?"
   - "–°–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–µ–æ –ø–æ–ª—É—á–∞–ª–∏ –Ω–æ–≤—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã 27 –Ω–æ—è–±—Ä—è 2025?"

5. –ë–æ—Ç –≤–µ—Ä–Ω–µ—Ç –æ—Ç–≤–µ—Ç - –æ–¥–Ω–æ —á–∏—Å–ª–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "42", "1000", "0")

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ –¢–ó

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
python test_examples.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ –ø—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —É–±–µ–¥–∏—Ç—Å—è, —á—Ç–æ –±–æ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –≤ –≤–∏–¥–µ —á–∏—Å–µ–ª.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
rlt/
‚îú‚îÄ‚îÄ src/                   # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ bot.py            # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª Telegram –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ database.py       # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy)
‚îÇ   ‚îú‚îÄ‚îÄ query_generator.py # –ú–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ query_executor.py  # –ú–æ–¥—É–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ file_analyzer.py   # –ú–æ–¥—É–ª—å –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö JSON —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_bot.py
‚îÇ   ‚îú‚îÄ‚îÄ test_database_structure.py
‚îÇ   ‚îú‚îÄ‚îÄ test_examples.py
‚îÇ   ‚îú‚îÄ‚îÄ test_requirements.py
‚îÇ   ‚îú‚îÄ‚îÄ test_sql_generation.py
‚îÇ   ‚îî‚îÄ‚îÄ run_all_tests.py   # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ scripts/               # –£—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ load_data.py      # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON
‚îÇ   ‚îú‚îÄ‚îÄ setup_env.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ fix_all_issues.py # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ fix_dependencies.py # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ check_db_compliance.py # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ë–î
‚îú‚îÄ‚îÄ migrations/            # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ 001_initial_schema.sql
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ logs/                  # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ cache/                 # –ö—ç—à —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑ –¥–ª—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ README.md             # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ ARCHITECTURE.md       # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ COMPONENTS.md         # –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ QUICK_START.md        # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `videos`
–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –≤–∏–¥–µ–æ:
- `id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∏–¥–µ–æ (PRIMARY KEY)
- `creator_id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫—Ä–µ–∞—Ç–æ—Ä–∞
- `video_created_at` - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
- `views_count` - —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- `likes_count` - —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
- `comments_count` - —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- `reports_count` - —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∞–ª–æ–±
- `created_at`, `updated_at` - —Å–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–ª—è

### –¢–∞–±–ª–∏—Ü–∞ `video_snapshots`
–ü–æ—á–∞—Å–æ–≤—ã–µ —Å–Ω–∞–ø—à–æ—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏–∫–∏:
- `id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–Ω–∞–ø—à–æ—Ç–∞ (PRIMARY KEY)
- `video_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –≤–∏–¥–µ–æ (FOREIGN KEY)
- `views_count`, `likes_count`, `comments_count`, `reports_count` - —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–º–µ—Ä–∞
- `delta_views_count`, `delta_likes_count`, `delta_comments_count`, `delta_reports_count` - –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è —Å –ø—Ä–æ—à–ª–æ–≥–æ –∑–∞–º–µ—Ä–∞
- `created_at` - –≤—Ä–µ–º—è –∑–∞–º–µ—Ä–∞ (—Ä–∞–∑ –≤ —á–∞—Å)
- `updated_at` - —Å–ª—É–∂–µ–±–Ω–æ–µ –ø–æ–ª–µ

## SQL –ú–∏–≥—Ä–∞—Ü–∏–∏

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `migrations/`.

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

**–°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ SQLAlchemy (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `init_db()` –∏–∑ –º–æ–¥—É–ª—è `database.py`.

**–°–ø–æ—Å–æ–± 2: –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ psql**

```bash
psql -U your_user -d video_analytics -f migrations/001_initial_schema.sql
```

**–°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ Python**

```python
from src.database import init_db
import os
from dotenv import load_dotenv

load_dotenv()
db_url = os.getenv('DATABASE_URL')
if db_url:
    init_db(db_url)
```

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–π —Å–º. –≤ [migrations/README.md](migrations/README.md).

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –°–º. [ARCHITECTURE.md](ARCHITECTURE.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã.

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **Telegram Bot** (`bot.py`) - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã
2. **Query Generator** (`query_generator.py`) - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫ –≤ SQL –∑–∞–ø—Ä–æ—Å—ã —Å –ø–æ–º–æ—â—å—é LLM
3. **Query Executor** (`query_executor.py`) - –≤—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∑–∞–ø—Ä–æ—Å—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
4. **Database Models** (`database.py`) - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö SQLAlchemy
5. **File Analyzer** (`file_analyzer.py`) - –∞–Ω–∞–ª–∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö JSON —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ GigaChat

> üìã **–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: –°–º. [COMPONENTS.md](COMPONENTS.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ SQL

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **GigaChat API** (—Ä–æ—Å—Å–∏–π—Å–∫–∏–π –∞–Ω–∞–ª–æ–≥ ChatGPT) –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –≤ SQL –∑–∞–ø—Ä–æ—Å—ã.

#### –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è LLM

–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `DATABASE_SCHEMA` –≤ —Ñ–∞–π–ª–µ `query_generator.py`:

```python
DATABASE_SCHEMA = """
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∏–¥–µ–æ –∏ –∏—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ.

–¢–ê–ë–õ–ò–¶–ê videos:
- id (INTEGER, PRIMARY KEY) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∏–¥–µ–æ
- creator_id (STRING) - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫—Ä–µ–∞—Ç–æ—Ä–∞
- video_created_at (DATETIME) - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
- views_count (BIGINT) - –∏—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- likes_count (BIGINT) - –∏—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
- comments_count (BIGINT) - –∏—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- reports_count (BIGINT) - –∏—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∞–ª–æ–±
...

–¢–ê–ë–õ–ò–¶–ê video_snapshots:
- id (INTEGER, PRIMARY KEY) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–Ω–∞–ø—à–æ—Ç–∞
- video_id (INTEGER, FOREIGN KEY -> videos.id) - —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ
- delta_views_count (BIGINT) - –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å –ø—Ä–æ—à–ª–æ–≥–æ –∑–∞–º–µ—Ä–∞
...
"""
```

#### –ü—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL

–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (`SYSTEM_PROMPT` –≤ `query_generator.py`) —Å–æ–¥–µ—Ä–∂–∏—Ç:

1. **–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –≤ SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è PostgreSQL
2. **–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î**: –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –∏—Ö –ø–æ–ª–µ–π
3. **–ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: —Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ SELECT –∑–∞–ø—Ä–æ—Å—ã, –∑–∞–ø—Ä–µ—â–µ–Ω—ã DROP, DELETE, UPDATE –∏ —Ç.–¥.
4. **–ü—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–¥–Ω–æ —á–∏—Å–ª–æ, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—Ç**: –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é —Ä—É—Å—Å–∫–∏—Ö –¥–∞—Ç –≤ SQL —Ñ–æ—Ä–º–∞—Ç
6. **–ü—Ä–∏–º–µ—Ä—ã**: –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö SQL –∑–∞–ø—Ä–æ—Å–æ–≤

–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–º–ø—Ç–∞:
```
–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ SQL –∑–∞–ø—Ä–æ—Å–∞–º –¥–ª—è PostgreSQL. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π SQL –∑–∞–ø—Ä–æ—Å.

[–°—Ö–µ–º–∞ –ë–î]

–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:
1. –í–æ–∑–≤—Ä–∞—â–∞–π –¢–û–õ–¨–ö–û SQL –∑–∞–ø—Ä–æ—Å, –ë–ï–ó –õ–Æ–ë–´–• –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
2. –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û SELECT –∑–∞–ø—Ä–æ—Å—ã
3. –ó–∞–ø—Ä–æ—Å –î–û–õ–ñ–ï–ù –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–¥–Ω–æ —á–∏—Å–ª–æ

[–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ SQL]
```

#### –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

1. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞**: —É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —á–∏—Å–µ–ª (100 000 ‚Üí 100000)
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL**: –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–º–ø—Ç–∞ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –≤–æ–ø—Ä–æ—Å–æ–º –≤ GigaChat API
3. **–û—á–∏—Å—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞**: —É–¥–∞–ª–µ–Ω–∏–µ markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –ª–∏—à–Ω–µ–≥–æ —Ç–µ–∫—Å—Ç–∞
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ SQL (—Ç–æ–ª—å–∫–æ SELECT, –∑–∞–ø—Ä–µ—Ç –æ–ø–∞—Å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
5. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**: –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ asyncpg –∏ –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º:
- –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ SELECT –∑–∞–ø—Ä–æ—Å—ã
- –ó–∞–ø—Ä–µ—â–µ–Ω—ã: DROP, DELETE, UPDATE, INSERT, ALTER, CREATE, TRUNCATE –∏ —Ç.–¥.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ `_validate_sql()` –∫–ª–∞—Å—Å–∞ `VideoAnalytics`

### –ê–Ω–∞–ª–∏–∑ JSON —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ LLM (FileAnalyzer)

–ü–æ–º–∏–º–æ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SQL, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑ JSON —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ **GigaChat API**. –ú–æ–¥—É–ª—å `FileAnalyzer` (`src/file_analyzer.py`) –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å JSON —Ñ–∞–π–ª—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –≤–∏–¥–µ–æ –∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

#### –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è LLM

–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ LLM –≤ –¥–≤—É—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:

1. **–ü–æ–ª–Ω—ã–π JSON** - –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ–±–æ–ª—å—à–æ–π (–¥–æ 100KB), –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤–µ—Å—å JSON —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º
2. **–°–≤–æ–¥–∫–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏** - –µ—Å–ª–∏ —Ñ–∞–π–ª –±–æ–ª—å—à–æ–π, —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –≤–∏–¥–µ–æ

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```json
{
  "videos": [
    {
      "id": "ecd8a4e4-1f24-4b97-a944-35d17078ce7c",  // UUID —Å—Ç—Ä–æ–∫–∞
      "creator_id": "aca1061a9d324ecf8c3fa2bb32d7be63",
      "video_created_at": "2025-08-19T08:54:35+00:00",
      "views_count": 1461,
      "likes_count": 35,
      "comments_count": 0,
      "reports_count": 0,
      "created_at": "2025-11-26T11:00:08.983295+00:00",
      "updated_at": "2025-12-01T10:00:00.236609+00:00",
      "snapshots": [
        {
          "id": "466bb5862d3f47fd85f11ca0dc1e6629",
          "video_id": "ecd8a4e4-1f24-4b97-a944-35d17078ce7c",
          "views_count": 1461,
          "likes_count": 35,
          "reports_count": 0,
          "comments_count": 0,
          "delta_views_count": 1461,
          "delta_likes_count": 35,
          "delta_reports_count": 0,
          "delta_comments_count": 0,
          "created_at": "2025-11-26T11:00:09.053200+00:00",
          "updated_at": "2025-11-26T11:00:09.053200+00:00"
        }
      ]
    }
  ]
}
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
- `id` –≤–∏–¥–µ–æ - —ç—Ç–æ **UUID —Å—Ç—Ä–æ–∫–∞** (—Ñ–æ—Ä–º–∞—Ç: `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`)
- `video_created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–¥–µ–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601
- `snapshots` - –º–∞—Å—Å–∏–≤ –ø–æ—á–∞—Å–æ–≤—ã—Ö –∑–∞–º–µ—Ä–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `delta_*_count` - –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–º–µ—Ä–∞

#### –ü—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (`system_prompt` –≤ –º–µ—Ç–æ–¥–µ `answer_question()`) —Å–æ–¥–µ—Ä–∂–∏—Ç:

1. **–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –æ –≤–∏–¥–µ–æ –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
2. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞**:
   - –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –¢–û–õ–¨–ö–û —á–∏—Å–ª–æ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞, –ø—Ä–æ–±–µ–ª–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–ß–ù–´–ï –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö
   - –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –≤–µ—Ä–Ω—É—Ç—å 0

3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ UUID**:
   - –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ, —á—Ç–æ ID –≤–∏–¥–µ–æ - —ç—Ç–æ UUID —Å—Ç—Ä–æ–∫–∞
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–æ—á–Ω–æ–º—É —Å—Ä–∞–≤–Ω–µ–Ω–∏—é UUID (—Å —É—á–µ—Ç–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞)
   - –ü—Ä–∏–º–µ—Ä—ã –ø–æ–∏—Å–∫–∞ –≤–∏–¥–µ–æ –ø–æ UUID

4. **–ü–æ–Ω–∏–º–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤**:
   - –í–æ–ø—Ä–æ—Å—ã –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤–∏–¥–µ–æ (–ø–æ UUID)
   - –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (COUNT)
   - –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (SUM)
   - –ú–∞–∫—Å–∏–º—É–º/–º–∏–Ω–∏–º—É–º (MAX/MIN)
   - –°–∏–Ω–æ–Ω–∏–º—ã –ø–æ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã = views_count, –ª–∞–π–∫–∏ = likes_count –∏ —Ç.–¥.)

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—Ç**:
   - –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
   - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏–∑ ISO 8601 —Ñ–æ—Ä–º–∞—Ç–∞
   - –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–∏–æ–¥–∞–º–∏ –¥–∞—Ç

6. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**:
   - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π –≤–∏–¥–µ–æ –∏ —Å–Ω–∞–ø—à–æ—Ç–æ–≤
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–∏—Å–∫—É –≤ –º–∞—Å—Å–∏–≤–∞—Ö
   - –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å UUID

7. **–ü—Ä–∏–º–µ—Ä—ã**:
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
   - –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å UUID
   - –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏

–ü—Ä–∏–º–µ—Ä —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞:

```
–¢—ã - –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ –≤–∏–¥–µ–æ –∏ –∏—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ.
–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –õ–Æ–ë–´–ï –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:
1. –í–æ–∑–≤—Ä–∞—â–∞–π –¢–û–õ–¨–ö–û —á–∏—Å–ª–æ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞, –ø—Ä–æ–±–µ–ª–æ–≤ –∏ —Å–∏–º–≤–æ–ª–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–ß–ù–´–ï –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö - –Ω–∞–π–¥–∏ –Ω—É–∂–Ω–æ–µ –≤–∏–¥–µ–æ/–¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤–µ videos
3. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ—Ç–≤–µ—Ç–∞, –≤–µ—Ä–Ω–∏ 0

–í–ê–ñ–ù–û –î–õ–Ø UUID:
- ID –≤–∏–¥–µ–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ UUID (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
- –§–æ—Ä–º–∞—Ç UUID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
- –ü—Ä–∏ –ø–æ–∏—Å–∫–µ –≤–∏–¥–µ–æ –ø–æ ID —Å—Ä–∞–≤–Ω–∏–≤–∞–π UUID –¢–û–ß–ù–û, —É—á–∏—Ç—ã–≤–∞—è –í–°–ï —Å–∏–º–≤–æ–ª—ã –∏ —Ä–µ–≥–∏—Å—Ç—Ä
- UUID —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É: "ECD8A4E4" ‚â† "ecd8a4e4"

–°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ù–´–•:
–î–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON —Å –º–∞—Å—Å–∏–≤–æ–º videos. –ö–∞–∂–¥–æ–µ –≤–∏–¥–µ–æ –∏–º–µ–µ—Ç:
- id: –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∏–¥–µ–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ UUID (—Å—Ç—Ä–æ–∫–∞)
- creator_id: –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫—Ä–µ–∞—Ç–æ—Ä–∞
- video_created_at: –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–¥–µ–æ (—Ñ–æ—Ä–º–∞—Ç ISO 8601)
- views_count: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- likes_count: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
- comments_count: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- reports_count: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∞–ª–æ–±
- snapshots: –º–∞—Å—Å–∏–≤ —Å–Ω–∞–ø—à–æ—Ç–æ–≤ (–ø–æ—á–∞—Å–æ–≤—ã—Ö –∑–∞–º–µ—Ä–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)
  - created_at: –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–Ω–∞–ø—à–æ—Ç–∞
  - views_count, likes_count, comments_count, reports_count: —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
  - delta_views_count, delta_likes_count, etc.: –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–º–µ—Ä–∞

[–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤...]
```

#### –ü—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: JSON —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `load_json_file()`
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–æ—Ä–º–∞—Ç UUID —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `_validate_data_structure()`
3. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: –î–∞–Ω–Ω—ã–µ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞:
   - –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ–±–æ–ª—å—à–æ–π - –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤–µ—Å—å JSON
   - –ï—Å–ª–∏ —Ñ–∞–π–ª –±–æ–ª—å—à–æ–π - —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–≤–æ–¥–∫–∞ –∏ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã —á–µ—Ä–µ–∑ `_select_sample_videos()`
4. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞**: –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∏–∑ `system_prompt` + `user_prompt` —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –≤–æ–ø—Ä–æ—Å–æ–º
5. **–ó–∞–ø—Ä–æ—Å –∫ GigaChat**: –ü—Ä–æ–º–ø—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ GigaChat API
6. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞**: –ò–∑ –æ—Ç–≤–µ—Ç–∞ LLM –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —á–∏—Å–ª–æ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `_extract_number()`
7. **–í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ JSON —Ñ–∞–π–ª–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–º–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –ø—Ä–∏–º–µ—Ä–æ–≤:

1. **–ü–µ—Ä–≤–æ–µ –≤–∏–¥–µ–æ** - –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
2. **–í–∏–¥–µ–æ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–Ω–∞–ø—à–æ—Ç–æ–≤** - –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
3. **–í–∏–¥–µ–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π** - –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –¥–∞–Ω–Ω—ã—Ö

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å –≤ LLM —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

#### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ü–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–∞ `videos` –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –æ–±—ä–µ–∫—Ç–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: `id`, `creator_id`)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ UUID –≤ –ø–æ–ª–µ `id` (–¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É UUID)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–Ω–∞–ø—à–æ—Ç–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: `video_id`, `created_at`)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è `video_id` –≤ —Å–Ω–∞–ø—à–æ—Ç–∞—Ö `id` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –≤–∏–¥–µ–æ

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.11+**
- **aiogram** - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
- **SQLAlchemy** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **asyncpg** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è PostgreSQL
- **GigaChat API** - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –†–æ—Å—Å–∏–∏ –±–µ–∑ VPN)
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Docker Compose** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, —Å–º. [TROUBLESHOOTING.md](TROUBLESHOOTING.md) –∏–ª–∏ [QUICK_FIX.md](QUICK_FIX.md)

**–ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º:**
```bash
python scripts/fix_all_issues.py
```

**–ò–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: `python scripts/fix_dependencies.py`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `python scripts/setup_env.py`

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

```bash
python tests/run_all_tests.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏ –≤—ã–≤–æ–¥–∏—Ç –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç.

### –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î:**
   ```bash
   python tests/test_database_structure.py
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL:**
   ```bash
   python tests/test_sql_generation.py
   ```

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤:**
   ```bash
   python tests/test_bot.py
   ```

4. **–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π:**
   ```bash
   python tests/test_requirements.py
   ```

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–º. –≤ [TESTING.md](TESTING.md).

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GigaChat –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –†–æ—Å—Å–∏–∏ –±–µ–∑ VPN)
- –î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏—Ä–æ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `video_snapshots` (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –ø–æ–ª—è `delta_*_count` –∏–ª–∏ –≤—ã—á–∏—Å–ª—è—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É MAX –∏ MIN)
- –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–∑–∞–ø—Ä–µ—â–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–∞ DROP, DELETE, UPDATE –∏ —Ç.–¥.)
- –ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞—Ç –≤ —Ä—É—Å—Å–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ: "28 –Ω–æ—è–±—Ä—è 2025", "—Å 1 –ø–æ 5 –Ω–æ—è–±—Ä—è 2025 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ" –∏ —Ç.–¥.
- –ë–æ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —á–∏—Å–ª–æ –≤ –æ—Ç–≤–µ—Ç–µ (–±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è - –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

